(this.webpackJsonpreduxbattleship=this.webpackJsonpreduxbattleship||[]).push([[0],{16:function(e,r,a){},28:function(e,r,a){"use strict";a.r(r);var t=a(1),n=a.n(t),i=a(5),o=a.n(i),s=(a(16),a(2)),c=a(10),l=a(11),p=function(e,r){for(var a=e,t=new Array(e).fill(0),n="Horizontal",i=0;i<t.length;i++)t[i]=r+" "+i;return{hit:function(){a-=1},shipDisplay:t,length:e,getName:function(){return r},getHealth:function(){return a},changeDirection:function(){n="Horizontal"===n?"Vertical":"Horizontal"},getDirection:function(){return n},isSunk:function(){return 0===a},name:r}},u=function(){var e=new Array(100).fill("empty"),r=Object(l.a)(Array(100).keys()),a=[p(5,"Carrier"),p(4,"Battleship"),p(3,"Destroyer"),p(3,"Submarine"),p(2,"PatrolBoat")],t="",n={down:10,up:-10,left:-1,right:1},i=[],o=0,s=0;return{gameBoard:e,generateHit:function(){var c="";if(0===i.length&&""===t){var l=Math.floor(Math.random()*r.length),p=r[l];if(r.splice(l,1),"empty"===e[p])return e[p]=e[p]+" disabled",{gameBoard:e};for(var u in n)r.includes(p+n[u])&&(p+n[u])%10!==0&&i.push({cardDirection:u,position:p+n[u],value:n[u]});c=e[p];for(var d=0;d<a.length;d++)if(a[d].getName()===c&&(a[d].hit(),e[p]=e[p]+" disabled",a[d].isSunk()))return{gameBoard:e,shipName:c}}else if(""===t){var h=Math.floor(Math.random()*i.length),m=i[h].position;if("empty"===e[m])return s=r.indexOf(m),r.splice(s,1),i.splice(h,1),e[m]=e[m]+" disabled",{gameBoard:e};t={direction:i[h].cardDirection,value:n[i[h].cardDirection],currentLoc:m},i.splice(h,1),s=r.indexOf(m),r.splice(s,1),c=e[m];for(var f=0;f<a.length;f++)if(a[f].getName()===c&&(a[f].hit(),e[m]=e[m]+" disabled",a[f].isSunk()))return t="",{gameBoard:e,shipName:c}}else if(o=t.value+t.currentLoc,e[o].includes("disabled")){var g=Math.floor(Math.random()*i.length),y=i[g].position;if("empty"===e[y])return s=r.indexOf(y),r.splice(s,1),i.splice(g,1),e[y]=e[y]+" disabled",{gameBoard:e};t={direction:i[g].cardDirection,value:n[i[g].cardDirection],currentLoc:y},i.splice(g,1),s=r.indexOf(y),r.splice(s,1),c=e[y];for(var b=0;b<a.length;b++)if(a[b].getName()===c&&(a[b].hit(),e[y]=e[y]+" disabled",a[b].isSunk()))return t="",{gameBoard:e,shipName:c}}else{if("empty"===e[o]){e[o]=e[o]+" disabled",s=r.indexOf(o),r.splice(s,1);for(var j=[],v=0;v<i.length;v++)if(i[v].value===-1*t.value){j.push(i[v]);break}return i=j,t="",{gameBoard:e}}t.currentLoc=o,c=e[o],e[o]=e[o]+" disabled",s=r.indexOf(o),r.splice(s,1);for(var S=0;S<a.length;S++)if(a[S].getName()===c&&(a[S].hit(),a[S].isSunk()))return t="",{gameBoard:e,shipName:c}}return{gameBoard:e}},placeShips:function(r,a,t,n,i){if(function(r,a,t,n){t=parseInt(t);var i=!1,o=!1;if("Horizontal"===a){if((t-=parseInt(n))<0)return!1;if(t+r-1>=e.length)return!1;for(var s=t;s<t+r;s++){if("empty"!==e[s])return!1;if(s%10===9&&(i=!0),s%10===0&&(o=!0),i&&o)return!1}}else if("Vertical"===a){if((t-=10*parseInt(n))<0)return!1;if(t+10*(r-1)>=e.length)return!1;for(var c=t;c<10*r+t;c+=10)if("empty"!==e[c])return!1}return!0}(r,t,n=parseInt(n),i)){if("Horizontal"===t){for(var o=n-=parseInt(i);o<r+n;o++)e[o]=a;return{pass:!0,gameBoard:e}}for(var s=n-=parseInt(10*i);s<10*r+n;s+=10)e[s]=a;return{pass:!0,gameBoard:e}}return{pass:!1,gameBoard:e}}}},d=function(){var e=u(),r=[p(5,"Carrier"),p(4,"Battleship"),p(3,"Destroyer"),p(3,"Submarine"),p(2,"PatrolBoat")];return{getDirections:function(){return r[0].getDirection()},changeDirections:function(){for(var e=0;e<r.length;e++)r[e].changeDirection()},playerBoard:e,shipArray:r}},h=a(3),m=function(){var e=new Array(100).fill("empty"),r=[p(5,"Carrier"),p(4,"Battleship"),p(3,"Destroyer"),p(3,"Submarine"),p(2,"PatrolBoat")];function a(r,t){if(1===Math.floor(2*Math.random())&&r.changeDirection(),function(r,a,t){var n=!1,i=!1;if("Horizontal"===r){if(t+a>=e.length)return!1;for(var o=t;o<t+a;o++){if("empty"!==e[o])return!1;if(o%10===9&&(n=!0),o%10===0&&(i=!0),n&&i)return!1}}else if("Vertical"===r){if(t+10*a>=e.length)return!1;for(var s=t;s<10*a+t;s+=10)if("empty"!==e[s])return!1}return!0}(r.getDirection(),r.length,t))if("Horizontal"===r.getDirection())for(var n=t;n<r.length+t;n++)e[n]=r.name;else for(var i=t;i<10*r.length+t;i+=10)e[i]=r.name;else a(r,Math.floor(Math.random()*e.length))}return{shipArray:r,gameBoard:e,generateShips:function(){return r.forEach((function(r){a(r,Math.floor(Math.random()*e.length))})),e},hitRegister:function(a){var t="";if("empty"!==e[a]){t=e[a];for(var n=0;n<r.length;n++)if(r[n].getName()===t&&(r[n].hit(),r[n].isSunk()))return console.log("sunk",t),e[a]=e[a]+" disabled",{gameBoard:e,shipName:t}}return e[a]=e[a]+" disabled",{gameBoard:e}}}},f=a(23),g=function(e,r){var a=f.cloneDeep(e),t=f.cloneDeep(e.cpu),n=f.cloneDeep(e.player),i=f.cloneDeep(e.statusDisplay),o=!1,s="";switch(r.type){case"PLACE_SHIP":var c=-1,l=(a=f.cloneDeep(e)).player.playerBoard.placeShips(r.payload.length,r.payload.name,r.payload.direction,r.payload.loc,r.payload.selectedPart);if(a.player.playerBoard.gameBoard=l.gameBoard,!0===l.pass)for(var p=0;p<a.player.shipArray.length;p++)a.player.shipArray[p].getName()===r.payload.name&&(c=p,a.player.shipArray.splice(c,1));e=a;break;case"RESET_BOARD":e={player:d(),gameState:!1,cpu:m(),cpuShips:{Carrier:!1,Battleship:!1,Destroyer:!1,Submarine:!1,PatrolBoat:!1},playerShips:{Carrier:!1,Battleship:!1,Destroyer:!1,Submarine:!1,PatrolBoat:!1},whoseTurn:"player",statusDisplay:"Place your ships and press start game to begin",gameEnd:!1,whoWon:"",shipDirection:"Horizontal"};break;case"CHANGE_DIRECTION":e="Horizontal"===e.shipDirection?Object(h.a)(Object(h.a)({},e),{},{shipDirection:"Vertical"}):Object(h.a)(Object(h.a)({},e),{},{shipDirection:"Horizontal"});break;case"START_GAME":(t=f.cloneDeep(e.cpu)).gameBoard=t.generateShips(),e=Object(h.a)(Object(h.a)({},e),{},{gameState:!0,cpu:t,statusDisplay:""});break;case"CPU_HIT":if(!0===e.gameEnd)return e;i="";var u=f.cloneDeep(e.cpuShips),g=(t=f.cloneDeep(e.cpu)).hitRegister(r.payload.loc);if(t.gameBoard=g.gameBoard,"shipName"in g)for(var y in u[g.shipName]=!0,i="Player has sunk Cpu's "+g.shipName,o=!0,u)if(!1===u[y]){o=!1;break}s=!0===o?"PLAYER":"",e=Object(h.a)(Object(h.a)({},e),{},{cpu:t,cpuShips:u,whoseTurn:"cpu",statusDisplay:i,gameEnd:o,whoWon:s});break;case"PLAYER_HIT":if(i="",!0===e.gameEnd)return e;var b=f.cloneDeep(e.playerShips),j=(n=f.cloneDeep(e.player)).playerBoard.generateHit();if(n.playerBoard.gameBoard=j.gameBoard,"shipName"in j)for(var v in b[j.shipName]=!0,i="Cpu has sunk Player's "+j.shipName,o=!0,b)!1===b[v]&&(o=!1);s=!0===o?"CPU":"",e=Object(h.a)(Object(h.a)({},e),{},{player:n,playerShips:b,whoseTurn:"player",statusDisplay:i,gameEnd:o,whoWon:s});break;case"GAME_OVER":e={player:d(),gameState:!1,cpu:m(),cpuShips:{Carrier:!1,Battleship:!1,Destroyer:!1,Submarine:!1,PatrolBoat:!1},playerShips:{Carrier:!1,Battleship:!1,Destroyer:!1,Submarine:!1,PatrolBoat:!1},whoseTurn:"player",statusDisplay:"Place your ships and press start game to begin",gameEnd:!1,whoWon:"",shipDirection:"Horizontal"}}return e},y=(a(25),Object(c.a)(g,{player:d(),gameState:!1,cpu:m(),cpuShips:{Carrier:!1,Battleship:!1,Destroyer:!1,Submarine:!1,PatrolBoat:!1},playerShips:{Carrier:!1,Battleship:!1,Destroyer:!1,Submarine:!1,PatrolBoat:!1},whoseTurn:"player",statusDisplay:"Place your ships and press start game to begin",gameEnd:!1,whoWon:"",shipDirection:"Horizontal"}));var b=a(4),j=a.n(b),v=a(0);var S=Object(s.b)((function(e){return{player:e.player,gameState:e.gameState,shipDirection:e.shipDirection}}),(function(e){return{placeShip:function(r,a,t,n,i){e(function(e,r,a,t,n){return{type:"PLACE_SHIP",payload:{length:e,name:r,direction:a,loc:t,selectedPart:n}}}(r,a,t,n,i))},resetBoard:function(){e({type:"RESET_BOARD",payload:{}})},gameStart:function(){e({type:"START_GAME",payload:{}})},changeDirection:function(){e({type:"CHANGE_DIRECTION",payload:{}})}}}))((function(e){var r=void 0,a=void 0,t=function(e){a=e.target.id.slice(-1)},n=function(a){for(var t=0;t<e.player.shipArray.length;t++)e.player.shipArray[t].getName()===a.target.id&&(r=e.player.shipArray[t])};return Object(v.jsxs)("div",{className:!0===e.gameState?"userBoardContainer":"userBoardContainer single",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"boardTitle",children:!0===e.gameState?"Player Waters":""}),Object(v.jsx)("ul",{className:"userBoard",onDrop:function(t){e.placeShip(r.length,r.getName(),r.getDirection(),t.target.value,a)},onDragOver:function(e){e.preventDefault()},children:e.player.playerBoard.gameBoard.map((function(e,r){return Object(v.jsx)("button",{value:r,className:"empty"===e?"empty":e},j()())}))}),Object(v.jsxs)("div",{className:"buttonWrapper",children:[Object(v.jsx)("button",{className:!0===e.gameState?"hidden":"changeDirection",onClick:0===e.player.shipArray.length?function(){e.gameStart()}:function(r){e.player.changeDirections(),e.changeDirection()},children:0===e.player.shipArray.length?"Start Game":"Change Direction"}),Object(v.jsx)("button",{className:!0===e.gameState?"hidden":"resetBoard",onClick:function(){e.resetBoard()},children:"Reset Board"})]})]}),Object(v.jsx)("div",{className:!0===e.gameState?"hidden":"allShipsContainer",children:Object(v.jsx)("div",{className:"Horizontal"===e.shipDirection?"shipContainer Horizontal":"shipContainer Vertical",children:e.player.shipArray.map((function(r){return Object(v.jsx)("div",{className:"Horizontal"===e.shipDirection?"ship Horizontal":"ship Vertical",id:r.getName(),draggable:!0,onDragStart:n,children:r.shipDisplay.map((function(e){return Object(v.jsx)("div",{id:e,className:"shipSquare",onMouseDown:t},j()())}))},j()())}))})})]})}));var D=Object(s.b)((function(e){return{cpu:e.cpu,gameState:e.gameState,whoseTurn:e.whoseTurn}}),(function(e){return{hitCpu:function(r){e(function(e){return{type:"CPU_HIT",payload:{loc:e}}}(r))},hitPlayer:function(){e({type:"PLAYER_HIT",payload:{}})}}}))((function(e){var r=function(r){e.hitCpu(r.target.value),setTimeout((function(){e.hitPlayer()}),1e3)};return Object(v.jsx)("div",{className:!0===e.gameState?"userBoardContainer":"hidden",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"boardTitle",children:"Enemy waters"}),Object(v.jsx)("ul",{className:"userBoard",children:e.cpu.gameBoard.map((function(a,t){return Object(v.jsx)("button",{value:t,onClick:r,className:"empty"===a?"empty":a+" cpu",disabled:a.includes("disabled")||"cpu"===e.whoseTurn},j()())}))})]})})}));var O=Object(s.b)((function(e){return{playerShips:e.playerShips,gameState:e.gameState}}),(function(e){return{}}))((function(e){return Object(v.jsxs)("div",{className:!0===e.gameState?"playerRemaining":"hidden",children:[Object(v.jsx)("div",{className:!0===e.playerShips.Battleship?"underline":"noDecoration",children:"Battleship"}),Object(v.jsx)("div",{className:!0===e.playerShips.PatrolBoat?"underline":"noDecoration",children:"PatrolBoat"}),Object(v.jsx)("div",{className:!0===e.playerShips.Submarine?"underline":"noDecoration",children:"Submarine"}),Object(v.jsx)("div",{className:!0===e.playerShips.Destroyer?"underline":"noDecoration",children:"Destroyer"}),Object(v.jsx)("div",{className:!0===e.playerShips.Carrier?"underline":"noDecoration",children:"Carrier"})]})}));var B=Object(s.b)((function(e){return{cpuShips:e.cpuShips,gameState:e.gameState}}),(function(e){return{}}))((function(e){return Object(v.jsxs)("div",{className:!0===e.gameState?"cpuRemaining":"hidden",children:[Object(v.jsx)("div",{className:!0===e.cpuShips.Battleship?"underline":"noDecoration",children:"Battleship"}),Object(v.jsx)("div",{className:!0===e.cpuShips.PatrolBoat?"underline":"noDecoration",children:"PatrolBoat"}),Object(v.jsx)("div",{className:!0===e.cpuShips.Submarine?"underline":"noDecoration",children:"Submarine"}),Object(v.jsx)("div",{className:!0===e.cpuShips.Destroyer?"underline":"noDecoration",children:"Destroyer"}),Object(v.jsx)("div",{className:!0===e.cpuShips.Carrier?"underline":"noDecoration",children:"Carrier"})]})}));var N=Object(s.b)((function(e){return{whoseTurn:e.whoseTurn,statusDisplay:e.statusDisplay,gameState:e.gameState}}),(function(e){return{}}))((function(e){var r="";return r=!0===e.gameState?"player"===e.whoseTurn?"Player's turn":"Cpu's Turn":"BATTLESHIP",Object(v.jsxs)("div",{className:"announcementContainer",children:[Object(v.jsx)("div",{className:"turnAnnouncement",children:r}),Object(v.jsx)("div",{className:"statusAnnouncement",children:e.statusDisplay})]})}));var x=Object(s.b)((function(e){return{gameEnd:e.gameEnd,whoWon:e.whoWon}}),(function(e){return{gameOver:function(){e({type:"GAME_OVER",payload:{}})}}}))((function(e){return Object(v.jsxs)("div",{className:!0===e.gameEnd?"gameOver":"hidden",children:[Object(v.jsx)("div",{children:"GAME OVER"}),Object(v.jsxs)("div",{children:[e.whoWon," HAS WON"]}),Object(v.jsx)("button",{onClick:function(){e.gameOver()},children:"PLAY AGAIN"})]})}));var C=function(){return Object(v.jsxs)(s.a,{store:y,children:[Object(v.jsx)(N,{}),Object(v.jsxs)("div",{id:"boardContainers",children:[Object(v.jsx)(O,{}),Object(v.jsx)(S,{}),Object(v.jsx)(D,{}),Object(v.jsx)(B,{})]}),Object(v.jsx)(x,{})]})};o.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(C,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.5f2a6eef.chunk.js.map